<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <meta title="Coral Musical" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
    <script src="./js/tap-to-teleport.js" type="text/javascript"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img
          src="./assets/textures/underwaterskybox.jpg"
          id="skybox"
          alt="Fondo de arena"
        />
      </a-assets>

      <a-entity id="ocean" ocean="density: 20; width: 50; depth: 50; speed: 4"
                material="color: #9CE3F9; opacity: 0.75; metalness: 0; roughness: 1"
                rotation="-90 0 0"></a-entity>

      <!-- Camera User View 1.6 Height -->
      <a-entity id="cameraRig" position="0 1.6 0" >
        <a-entity id="head" position="0 0 0" camera="userHeight:1.6" look-controls="pointerLockEnabled:true">
          <a-entity position="0.1 -0.1 0"
            touch-listener
            teleport-controls=
              "cameraRig: #cameraRig;
               teleportOrigin: #head;
               startEvents:starttouch;
               endEvents:endtouch;
               curveShootingSpeed:15;
               hitCylinderRadius:1;
               collisionEntities: [ground]"
            >
          </a-entity>
        </a-entity>
      </a-entity>    

      <!-- Skybox -->
      <a-sky src="#skybox"></a-sky>
      <a-entity ground
      geometry="primitive:box; width:10; depth:10; height:0.01;"
      material="color:#333"
      position="-5 0 -5"        
    >
    </a-entity>    

    <!-- Grounds para tap-to-teleport -->
    <a-entity ground
      geometry="primitive:box; width:3; depth:3; height:2;"
      material="color:#666"
      position="-6 1 -6"        
    >
    </a-entity>    

    <a-entity ground
      geometry="primitive:box; width:3; depth:3; height:3;"
      material="color:#999"
      position="-3 1.5 -8"        
    >
    </a-entity> 

      <!-- Arrecife de coral para la caja de ritmo -->
      <a-box
        position="-3 0 -4"
        color="blue"
        scale="1 2 1"
        sound="src: #cajaRitmo; on: click"
      ></a-box>

      <!-- Arrecife de coral para el secuenciador -->
      <a-cylinder
        position="0 0 -8"
        color="green"
        radius="1"
        height="2"
        sound="src: #secuenciador; on: click"
      ></a-cylinder>

      <!-- Arrecife de coral para las melodías -->
      <a-sphere
        position="3 0 -4"
        color="red"
        radius="1"
        sound="src: #melodias; on: click"
      ></a-sphere>

      <!-- Fondo oceánico -->
      <a-plane
        position="0 -35 0"
        rotation="-90 0 0"
        width="20"
        height="20"
        color="#DEE1D4"
      ></a-plane>

      <!-- Recursos de sonido -->
      <audio
        id="cajaRitmo"
        src="./assets/audio/percusiones.mp3"
      ></audio>
      <audio
        id="secuenciador"
        src="./assets/audio/rattle-bass.mp3"
      ></audio>
      <audio
        id="melodias"
        src="./assets/audio/oboe-staccato.mp3"
      ></audio>
    </a-scene>
  </body>
</html>
